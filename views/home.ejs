<div class="container mt-5">
  <h1 class="text-center mb-4 text-dark">DAFTAR FILM</h1>
  <div class="row">
    <% films.forEach((film) => { %>
    <div class="col-md-4 mb-4">
      <div class="card-container" onclick="showSynopsis('<%= film.id_film %>')">
        <img
          src="<%= film.image_url || '/default-image.jpg' %>"
          class="card-img-top"
          alt="<%= film.title %>"
        />
        <div class="card-body">
          <h5 class="card-title text-primary"><%= film.title %></h5>
          <h6 class="card-title text-primary111"><%= film.duration %></h6>
        </div>
        <div class="card-footer text-center">
          <a class="btn btn-primary" href="/order">Order</a>
        </div>
      </div>
    </div>
    <% }); %>
  </div>
</div>

<!-- Bootstrap Modal -->
<div
  class="modal fade"
  id="synopsisModal"
  tabindex="-1"
  aria-labelledby="synopsisModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header bg-primary text-light">
        <h5 class="modal-title" id="synopsisModalLabel">Sinopsis Film</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body" id="synopsisContent"></div>
      <div class="modal-footer text-center">
        <a class="btn btn-secondary" href="/order">Order</a>
      </div>
    </div>
  </div>
</div>

<script>
  function showSynopsis(id) {
    fetch(`/films/${id}`)
      .then((response) => response.json())
      .then((data) => {
        document.getElementById("synopsisContent").innerText = data.description;
        new bootstrap.Modal(document.getElementById("synopsisModal")).show();
      })
      .catch((error) => console.error("Error fetching synopsis:", error));
  }
</script>
